// Generated by CoffeeScript 1.7.1
(function() {
  var $, fs, mime, path;

  $ = require('cheerio');

  fs = require('fs');

  mime = require('mime');

  path = require('path');

  module.exports = {
    init: function(filepath) {
      this.filepath = filepath;
      return this.html = $.load(fs.readFileSync(this.filepath));
    },
    print: function() {
      return console.log("" + (this.html.html()));
    },
    replace: function() {
      return this.html('img').each((function(_this) {
        return function(i, element) {
          var dataurl, imagepath;
          imagepath = $(element).attr('src');
          dataurl = "data:" + (mime.lookup(imagepath)) + ";base64," + (fs.readFileSync(imagepath).toString('base64'));
          return $(element).attr('src', dataurl);
        };
      })(this));
    },
    save: function(dest) {
      var filename;
      filename = path.join(dest, path.basename(this.filepath));
      return fs.writeFileSync(filename, this.html.html());
    }
  };

}).call(this);
